-- Blox Fruits Script Menu (Comprehensive)

-- Setup references
local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local mouse = player:GetMouse()

-- GUI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = playerGui
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 400)
frame.Position = UDim2.new(0.5, -150, 0.5, -200)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BackgroundTransparency = 0.5
frame.Parent = screenGui

-- Create Function to Make Buttons
local function createButton(name, position, action)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 260, 0, 40)
    button.Position = position
    button.Text = name
    button.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
    button.Parent = frame

    button.MouseButton1Click:Connect(function()
        action()
    end)
end

-- 1. Teleportation to Island Function
local function teleportToIsland(islandName)
    local island = game.Workspace:FindFirstChild(islandName)
    if island and island.PrimaryPart then
        humanoidRootPart.CFrame = CFrame.new(island.PrimaryPart.Position)
        print("Teleported to " .. islandName)
    else
        warn(islandName .. " not found!")
    end
end

-- 2. Auto Farming Function (Auto-attacking nearby enemies)
local function autoFarm()
    while true do
        -- Check for nearby enemies
        local closestEnemy = nil
        local minDist = math.huge

        for _, enemy in pairs(game.Workspace.Enemies:GetChildren()) do
            if enemy:FindFirstChild("HumanoidRootPart") then
                local dist = (humanoidRootPart.Position - enemy.HumanoidRootPart.Position).Magnitude
                if dist < minDist then
                    minDist = dist
                    closestEnemy = enemy
                end
            end
        end

        -- Attack the closest enemy
        if closestEnemy then
            local targetPosition = closestEnemy.HumanoidRootPart.Position
            humanoidRootPart.CFrame = CFrame.new(targetPosition)
            -- Assuming an attack function exists for this
            -- example: Fire some attack (simplified)
            print("Attacking " .. closestEnemy.Name)
        end

        wait(1)
    end
end

-- 3. Auto Fruit Finder Function
local function autoFruitFinder()
    while true do
        for _, fruit in pairs(game.Workspace:GetChildren()) do
            if fruit.Name == "Fruit" then
                if (humanoidRootPart.Position - fruit.Position).Magnitude < 100 then
                    -- Picking up the fruit (simplified)
                    print("Found Fruit: " .. fruit.Name)
                    fireclickdetector(fruit:FindFirstChildOfClass("ClickDetector"))
                end
            end
        end
        wait(5)
    end
end

-- 4. Toggle ESP for Players
local function toggleESP()
    local espEnabled = false
    while espEnabled do
        for _, enemy in pairs(game.Workspace:GetChildren()) do
            if enemy:IsA("Model") and enemy:FindFirstChild("Humanoid") then
                local espPart = Instance.new("Part")
                espPart.Size = Vector3.new(2, 2, 2)
                espPart.Position = enemy.HumanoidRootPart.Position
                espPart.Anchored = true
                espPart.CanCollide = false
                espPart.Material = Enum.Material.SmoothPlastic
                espPart.Color = Color3.fromRGB(255, 0, 0)
                espPart.Parent = game.Workspace
                -- Clean up ESP parts
                game:GetService("Debris"):AddItem(espPart, 1)
            end
        end
        wait(0.5)
    end
end

-- 5. Stat Reset (Use a stat reset item or custom script for stats)
local function resetStats()
    -- Assuming you have a script for resetting stats or using an item
    print("Stats Reset!")
    -- For example:
    -- character:FindFirstChild("StatResetItem"):Fire()
end

-- 6. Miscellaneous Options (example: infinite stamina)
local function infiniteStamina()
    while true do
        -- Assuming player has stamina and the humanoid holds a Stamina property
        character:FindFirstChild("Humanoid").Stamina = 100
        wait(0.1)
    end
end

-- Create Buttons for the Menu
createButton("Teleport to Cafe Island", UDim2.new(0, 20, 0, 20), function()
    teleportToIsland("CafeIsland")
end)
createButton("Start Auto Farming", UDim2.new(0, 20, 0, 80), function()
    autoFarm()
end)
createButton("Start Auto Fruit Finder", UDim2.new(0, 20, 0, 140), function()
    autoFruitFinder()
end)
createButton("Toggle ESP", UDim2.new(0, 20, 0, 200), function()
    toggleESP()
end)
createButton("Reset Stats", UDim2.new(0, 20, 0, 260), function()
    resetStats()
end)
createButton("Infinite Stamina", UDim2.new(0, 20, 0, 320), function()
    infiniteStamina()
end)

